<div class="container-fluid">
  <div class="row">
    <div class="col-sm-offset-2 col-sm-8 col-xs-12 text-center" style="border: 2px solid #ededed">

      <uib-tabset active="activeJustified" justified="true">
        <h3 class="pull-left">
          <i class="glyphicon glyphicon-user"></i>
          <span ng-show="user.name == null || user.name == ''">You are Anonymous! <a ng-href="#!/register">Register!</a></span>
          <span ng-show="!(user.name == null || user.name == '')">{{ user.name }}</span>
        </h3>

        <br><br>
        <br><br>

        <uib-tab index="0" heading="Script" ng-click="showScripts()">

          <table class="table table-striped">
            <thead>
              <td>User</td>
              <td>Script</td>
              <td>Date</td>
            </thead>
            <tbody>
              <tr ng-repeat="script in scripts track by $index">
                <td>{{ script._id }}</td>
                <td>
                  <b class="text-primary">{{ script.path.replace("./upload/", "") }}</b>
                  &nbsp;
                  <a href="agentsim/livesim?path={{script.path.replace('./upload/', '')}}" target="_blank" class="nodecoration">
                    <h4 class="text-success play">
                      <i class="glyphicon glyphicon-play-circle"></i>
                    </h4>
                  </a>
                  &nbsp;
                  <h4 class="text-info play">
                    <i class="glyphicon glyphicon-edit"></i>
                  </h4>
                </td>
                <td>{{ script.creation.getDate() + "/" + script.creation.getMonth() + "/" + script.creation.getFullYear() }}</td>
              </tr>
            </tobdy>
          </table>

        </uib-tab>

        <uib-tab index="1" heading="Create script">
          <br>

          <form ng-submit="uploadScript(scriptName, script)">
            <div class="form-inline">
              <label><h4>Name:</h4></label>
              <div class="form-group">
                <input type="text" class="form-control" ng-model="scriptName" placeholder="name of the script.." required>
              </div>
            </div>

            <br>
            <textarea class="form-control script-area" ng-model="script" required></textarea>

            <br><br>
            <button type="submit" class="btn btn-md btn-success">Upload script</button>
          </form>

          <form method="POST" action="agentsim/livesim" target="_blank">
            <input type="hidden" name="data" ng-value="script">
            <button type="submit"><i class="glyphicon glyphicon-edit"></i>Live-Preview</button>
          </form>

          <br><br>

        </uib-tab>

        <uib-tab index="2" heading="Upload your script">
          <br>
          <br>

          <button class="btn btn-md btn-primary" type="file" ngf-select="setFile($file, $invalidFiles)" accept=".js">
            Select File
          </button>
          <br><br>
            <h4><i class="upload-icon glyphicon glyphicon-open-file"></i> {{ f.name }} {{ errFile.name }} {{ errFile.$error }} {{ errFile.$errorParam }}</h4>
            <br>
            <button class="btn btn-md btn-success" ng-show="f.name != null && f.name != ''" ng-click="uploadFile(f, errFile)">Upload script</button>
            <br>
            <div class="text-center" ng-show="f.progress >= 0">
              <br><br>
              <uib-progressbar class="progress-script progress-striped active"  animate="true" value="f.progress" type="success">
                <b>{{ f.progress }}%</b>
              </uib-progressbar>
            </div>
          {{ errorMsg }}

          <br><br>
        </uib-tab>
      </uib-tabset>

    </div>
  </div>
</div>
